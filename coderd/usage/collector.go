package usage

import (
	"context"

	"github.com/coder/coder/v2/coderd/database"
	"github.com/coder/coder/v2/coderd/usage/usagetypes"
)

// Collector is a sink for usage events generated by the product.
type Collector interface {
	// CollectDiscreteUsageEvent writes a discrete usage event to the database
	// with the given database or transaction.
	CollectDiscreteUsageEvent(ctx context.Context, db database.Store, event usagetypes.DiscreteEvent) error
}

// AGPLCollector is a no-op implementation of Collector.
type AGPLCollector struct{}

var _ Collector = AGPLCollector{}

func NewAGPLCollector() Collector {
	return AGPLCollector{}
}

// CollectDiscreteUsageEvent is a no-op implementation of
// CollectDiscreteUsageEvent.
func (AGPLCollector) CollectDiscreteUsageEvent(_ context.Context, _ database.Store, _ usagetypes.DiscreteEvent) error {
	return nil
}
